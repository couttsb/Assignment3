package ca.mcgill.ecse321.loyaltypoints;

import java.util.Date;
import java.util.Scanner;

public class StrategyPatternDemo {
	
	public static void main(String[] args) {
		String name;
		double price;
		try(Scanner user_input = new Scanner(System.in)) {
			System.out.print("Enter the shoppers name: ");
			name = user_input.next();
			
			System.out.println("Enter the total price of the groceries: ");
			price = user_input.nextDouble(); 
			while (price <= 0) {
				System.out.println("Please enter a price value greater than 0! ");
				System.out.println("Enter the total price of the groceries: ");
				price = user_input.nextDouble();
			}
		}
		
		Date date = new Date();

		Purchase purchase = new Purchase(new OperationFlatRatePoints());	
		int flatratepoints = purchase.executeStrategy(price);
		System.out.println("Flat-Rate Points = " + flatratepoints); 
			

		purchase = new Purchase(new OperationPerDollarPoints());	
		int perdollarpoints = purchase.executeStrategy(price);
		System.out.println("Per-Dollar Points = " + perdollarpoints);

		purchase = new Purchase(new OperationThresholdPoints());	
		int thresholdpoints = purchase.executeStrategy(price);
		if (price >= 100 && price <= 250) {
			System.out.println("Threshold Points = " + thresholdpoints);
		} else if (price > 250) {
			System.out.println("Threshold Points = 500");
		} else {
			System.out.println("Threshold Points = 0");
		}
		
		System.out.println("");
		System.out.println("Shopper name: " + name);
		if (flatratepoints > perdollarpoints && flatratepoints > thresholdpoints) {
			System.out.println("Maximum Total Points Recieved Using Flat-Rate Points = " + flatratepoints);
		}
		if (price > 25 && price < 100) {
			System.out.println("Maximum Total Points Recieved Using Per-Dollar Points = " + perdollarpoints);
		} else if (price == 25) {
			System.out.println("Maximum Total Points recieved Using Either Flat-Rate Points or Per-dollar Points = " + perdollarpoints);
		}
		if (price >= 100 && price < 500) {
			if (price > 250) {
				thresholdpoints = 500;
			}
			System.out.println("Maximum Total Points Recieved Using Threshold Points = " + thresholdpoints);
		}
		if (price >= 500) {
			System.out.println("Maximum Total Points Recieved Using Either Per-Dollar Points or Threshold Points = " + thresholdpoints);
		}
		System.out.println("Date of Purchase: " + date);
	}
}